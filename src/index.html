<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BlockX demo</title>

  <!-- Blockly -->
  <script src="../node_modules/blockly/blockly_compressed.js"></script>
  <script src="../node_modules/blockly/blocks_compressed.js"></script>
  <script src="../node_modules/blockly/javascript_compressed.js"></script>
  <script src="../node_modules/blockly/python_compressed.js"></script>
  <script src="../node_modules/blockly/msg/en.js"></script>

  <!-- import CustomBlocks  -->
  <script src="globalConst.js"></script>
  <script src="./CustomBlocks/call.js"></script>
  <script src="./CodeGenerators/call.js"></script>
  <script src="./CustomBlocks/function.js"></script>
  <script src="./CodeGenerators/function.js"></script>
  <script src="./CustomBlocks/lambda.js"></script>
  <script src="./CodeGenerators/lambda.js"></script>
  <script src="./CustomBlocks/import.js"></script>
  <script src="./CodeGenerators/import.js"></script>
  <script src="CustomBlocks/keyword.js"></script>
  <script src="CustomBlocks/controls.js"></script>
  <script src="CustomBlocks/binOp.js"></script>
  <link rel="stylesheet" type="text/css" href="./style.css">
</head>

<body>
  <header></header>
  <div id="tran-space">
    <div id="blockly-div"></div>
    <div id="code-div">
      <textarea id="python-code"></textarea>
    </div>
  </div>
  <xml id="toolbox" style="display:none">
    <category name="Variables" colour="225" custom="VARIABLE"></category>
    <category name="Literal Values" colour="30">
      <block type="starred"></block>
    </category>
    <category name="Calculations" colour="190"></category>
    <category name="Logic" colour="345"></category>
    <sep></sep>
    <category name="Classes" colour="240">
      <block type="FunctionDef"></block>
      <block type="lambda">
        <mutation decorators="0" parameters="1" returns="false"/>
        <value name="PARAMETER0">
        <block type="FunctionParameter" line_number="1" movable="false" deletable="false">
        <field name="NAME">___</field>
        </block>
        </value>
      </block>
    </category>
    <category name="Functions" colour="210">
    </category>
    <category name="Imports" colour="60">
      <block type="import" line_number="1" inline="true">
        <mutation names="1" from="false">
          <regular name="true" />
        </mutation>
        <field name="NAME0">___</field>
      </block>
      <block type="import" line_number="1" inline="true">
        <mutation names="1" from="true">
          <regular name="true" />
        </mutation>
        <field name="NAME0">___</field>
        <field name="MODULE">___</field>
      </block>
      <block type="import" line_number="1" inline="true">
        <mutation names="1" from="false">
          <regular name="false" />
        </mutation>
        <field name="NAME0">___</field>
        <field name="ASNAME0">___</field>
      </block>
      <block type="import" line_number="1" inline="true">
        <mutation names="1" from="true">
          <regular name="false" />
        </mutation>
        <field name="NAME0">___</field>
        <field name="ASNAME0">___</field>
        <field name="MODULE">___</field>
      </block>
    </category>
    <sep></sep>
    <category name="Control Flow" colour="270">
      <block type="controls_if" line_number="1">
        <mutation orelse="false" elifs="0" />
      </block>
      <block type="for" line_number="1"></block>
      <block type="while" line_number="1">
        <mutation orelse="false" />
      </block>
      <block type="break" line_number="1"></block>
      <block type="continue" line_number="1"></block>
      <block type="try" line_number="1">
        <mutation orelse="false" finalbody="false" handlers="1">
          <arg name="3" />
        </mutation>
        <field name="NAME0">___</field>
      </block>
      <block type="raise" line_number="1">
        <mutation exc="true" cause="false" />
      </block>
      <block type="assert" line_number="1"></block>
    </category>
    <sep></sep>
    <category name="Output" colour="140"></category>
    <category name="Input" colour="120"></category>
    <category name="Files" colour="170"></category>
    <sep></sep>
    <category name="Conversion" colour="120"></category>
    <category name="Builtin Functions" colour="15">
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="iter" message="iter" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="issubclass" message="issubclass" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="isinstance" message="isinstance" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="id" message="id" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="hex" message="hex" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="help" message="help" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="hash" message="hash" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="hasattr" message="hasattr" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="globals" message="globals" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="getattr" message="getattr" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="frozenset" message="frozenset" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="eval" message="eval" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="divmod" message="divmod" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="locals" message="locals" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="max" message="max" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="memoryview" message="memoryview" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="min" message="min" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="next" message="next" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
      <block type="Call" line_number="1" inline="true">
        <mutation arguments="1" returns="true" parameters="true" method="false" name="object" message="object" premessage="" colour="190" module="">
        <arg name="UNKNOWN_ARG:0"/>
        </mutation>
      </block>
    </category>
    <category name="List Methods" colour="30"></category>
    <category name="String Methods" colour="120"></category>
    <category name="Subscripting" colour="15"></category>
    <category name="Generators" colour="15"></category>
    <category name="Comments" colour="60"></category>
  </xml>
  <script type="text/javascript">
// test for code
const workSpace = Blockly.inject('blockly-div', {
  toolbox: document.getElementById('toolbox'),
});

Blockly.Xml.domToWorkspace(document.getElementById('toolbox'), workSpace);
function updateFunction(event) {
  const code = Blockly.Python.workspaceToCode(workSpace);
  document.getElementById('python-code').value = code;
}
workSpace.addChangeListener(updateFunction);

  </script>
</body>

</html>
